"use strict";(self.webpackChunklearning_testing_2022_frontend=self.webpackChunklearning_testing_2022_frontend||[]).push([[642],{8642:(X,h,a)=>{a.r(h),a.d(h,{TicketsModule:()=>H});var w=a(6977),x=a(1083),l=a(4999),u=a(3737),m=a(1777),r=a(3075),g=a(8966),b=a(727),_=a(8306),t=a(5e3),Z=a(9576),D=a(9646),O=a(2340),k=a(520);let C=(()=>{class o{constructor(e){this.http=e,this.apiUrl=O.N.apiUrl}getTickets(){return this.http.get(this.apiUrl+"/tickets")}getTicketById(e){return(0,D.of)()}createTicket(e){return this.http.post(`${this.apiUrl}/tickets`,e)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(k.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var y=a(2290),p=a(7322),T=a(7531),f=a(9808),M=a(4107),A=a(508),v=a(7423);function N(o,i){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.getErrorMessage(""))}}function S(o,i){if(1&o&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.viewValue," ")}}function U(o,i){if(1&o&&(t.TgZ(0,"mat-option",12),t._uU(1),t.qZA()),2&o){const e=i.$implicit;t.Q6J("value",e.value),t.xp6(1),t.hij(" ",e.viewValue," ")}}function B(o,i){if(1&o&&(t.TgZ(0,"mat-error"),t._uU(1),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Oqu(e.getErrorMessage(""))}}let P=(()=>{class o{constructor(e,n,s,c,d){this.dialogRef=e,this.data=n,this.usersService=s,this.ticketsService=c,this.toastr=d,this.prioritiesOptions=[{value:"very_low",viewValue:"very low"},{value:"low",viewValue:"low"},{value:"normal",viewValue:"normal"},{value:"high",viewValue:"high"},{value:"very_high",viewValue:"very high"}],this.usersOptions=[],this.form=new r.cw({title:new r.NI("",[r.kI.required,r.kI.minLength(5),r.kI.maxLength(200)]),description:new r.NI(""),priority:new r.NI(this.prioritiesOptions[2].value),assignee:new r.NI(""),relatedTicket:new r.NI("")}),this.subs=new b.w0,this.users$=new _.y}ngOnInit(){this.subs.add(),this.getUsers(),this.getUsersOptions()}getUsers(){this.users$=this.usersService.getUsers()}getUsersOptions(){this.users$.subscribe(e=>{this.usersOptions=e.map(n=>({value:n.id,viewValue:n.name}))})}onSubmit(){if(this.form.invalid)return;const e=Object.assign(Object.assign({},this.form.value),{authorId:5});this.ticketsService.createTicket(e).subscribe({next:()=>{this.onClose(),this.toastr.success("A new ticket has been created","Success")},error:n=>{this.toastr.error("Something went wrong","Error")}})}onClose(){this.dialogRef.close()}getErrorMessage(e){}ngOnDestroy(){this.subs.unsubscribe()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(g.so),t.Y36(g.WI),t.Y36(Z.f),t.Y36(C),t.Y36(y._W))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-ticket-details-modal"]],inputs:{ticket:"ticket"},decls:28,vars:6,consts:[[3,"formGroup","ngSubmit"],["appearance","fill"],["matInput","","formControlName","title"],[4,"ngIf"],[2,"display","flex"],["appearance","fill",2,"flex-grow","1","margin-right","1rem"],["formControlName","priority"],[3,"value",4,"ngFor","ngForOf"],["formControlName","assignee"],["matInput","","formControlName","description","rows","10"],["mat-raised-button","","color","primary","type","submit",1,"mr-xs",3,"disabled"],["mat-raised-button","","type","button",3,"click"],[3,"value"]],template:function(e,n){if(1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return n.onSubmit()}),t.TgZ(1,"h2"),t._uU(2,"Index details modal"),t.qZA(),t.TgZ(3,"mat-form-field",1)(4,"mat-label"),t._uU(5,"Title"),t.qZA(),t._UZ(6,"input",2),t.YNc(7,N,2,1,"mat-error",3),t.qZA(),t.TgZ(8,"section",4)(9,"mat-form-field",5)(10,"mat-label"),t._uU(11,"Priority"),t.qZA(),t.TgZ(12,"mat-select",6),t.YNc(13,S,2,2,"mat-option",7),t.qZA()(),t.TgZ(14,"mat-form-field",5)(15,"mat-label"),t._uU(16,"Assignee"),t.qZA(),t.TgZ(17,"mat-select",8),t.YNc(18,U,2,2,"mat-option",7),t.qZA()()(),t.TgZ(19,"mat-form-field",1)(20,"mat-label"),t._uU(21,"Description"),t.qZA(),t._UZ(22,"textarea",9),t.YNc(23,B,2,1,"mat-error",3),t.qZA(),t.TgZ(24,"button",10),t._uU(25,"Submit"),t.qZA(),t.TgZ(26,"button",11),t.NdJ("click",function(){return n.onClose()}),t._uU(27,"Close"),t.qZA()()),2&e){let s,c;t.Q6J("formGroup",n.form),t.xp6(7),t.Q6J("ngIf",null==(s=n.form.get("title"))?null:s.invalid),t.xp6(6),t.Q6J("ngForOf",n.prioritiesOptions),t.xp6(5),t.Q6J("ngForOf",n.usersOptions),t.xp6(5),t.Q6J("ngIf",null==(c=n.form.get("description"))?null:c.invalid),t.xp6(1),t.Q6J("disabled",n.form.invalid)}},directives:[r._Y,r.JL,r.sg,p.KE,p.hX,T.Nt,r.Fj,r.JJ,r.u,f.O5,p.TO,M.gD,f.sg,A.ey,v.lW],styles:["mat-form-field[_ngcontent-%COMP%]{display:block}.mat-form-field[_ngcontent-%COMP%]{margin-bottom:0rem}.mr-xs[_ngcontent-%COMP%]{margin-right:.5rem}"]}),o})();var I=a(6087);function J(o,i){if(1&o&&(t.TgZ(0,"th",16),t._uU(1),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.hij(" ",e," ")}}function Y(o,i){if(1&o&&(t.TgZ(0,"td",17),t._uU(1),t.qZA()),2&o){const e=i.$implicit,n=t.oxw().$implicit;t.xp6(1),t.hij(" ",e[n]," ")}}function R(o,i){1&o&&(t.ynx(0,14),t.YNc(1,J,2,1,"th",15),t.YNc(2,Y,2,1,"td",8),t.BQk()),2&o&&t.s9C("matColumnDef",i.$implicit)}function F(o,i){if(1&o&&(t.TgZ(0,"td",17)(1,"div",18)(2,"div",19),t._uU(3),t.qZA(),t.TgZ(4,"div",19),t._uU(5),t.qZA(),t.TgZ(6,"div",19),t._uU(7),t.qZA()()()),2&o){const e=i.$implicit,n=t.oxw();t.uIk("colspan",n.ticketsColumns.length),t.xp6(1),t.Q6J("@detailExpand",e==n.expandedElement?"expanded":"collapsed"),t.xp6(2),t.hij("Description: ",e.description,""),t.xp6(2),t.hij("Created: ",e.createdAt,""),t.xp6(2),t.hij("Last updated: ",e.updatedAt,"")}}function j(o,i){1&o&&t._UZ(0,"tr",20)}function Q(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"tr",21),t.NdJ("click",function(){const c=t.CHM(e).$implicit,d=t.oxw();return d.expandedElement=d.expandedElement===c?null:c}),t.qZA()}if(2&o){const e=i.$implicit,n=t.oxw();t.ekj("example-expanded-row",n.expandedElement===e)}}function $(o,i){1&o&&t._UZ(0,"tr",22)}function z(o,i){if(1&o&&(t.TgZ(0,"tr",23)(1,"td",24),t._uU(2),t.qZA()()),2&o){t.oxw();const e=t.MAs(8);t.xp6(2),t.hij('No data matching the filter "',e.value,'"')}}const E=function(){return["expandedDetail"]},L=function(){return[5,10,25,100]},q=[{path:"",component:(()=>{class o{constructor(e,n,s){this.http=e,this.dialog=n,this.ticketsService=s,this.title="learning-testing-2022-frontend",this.ticketsDataSource=new l.by,this.tickets=[],this.ticketsColumns=["id","title","priority","status"]}ngOnInit(){this.loadTickets()}loadTickets(){this.ticketsService.getTickets().subscribe(e=>{this.tickets=e,this.interpolateTicketsIds(),this.recalculateTicketPositions(),this.ticketsDataSource=new l.by(e)})}interpolateTicketsIds(){this.tickets.map((e,n)=>(e.id=`LT-${e.id}`,e))}recalculateTicketPositions(){this.tickets.map((e,n)=>(e.position=n+1,e))}applyFilter(e){this.ticketsDataSource.filter=e.target.value.trim().toLowerCase()}drop(e){(0,u.bA)(this.tickets,e.previousIndex,e.currentIndex),this.recalculateTicketPositions(),this.ticketsDataSource=new l.by(this.tickets)}openDialog(){this.dialog.open(P,{width:"700px",data:{},disableClose:!0}).afterClosed().subscribe(n=>{console.log(`The dialog was closed. Result: ${n}`),this.loadTickets()})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(k.eN),t.Y36(g.uw),t.Y36(C))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-backlog"]],decls:19,vars:9,consts:[["mat-raised-button","",3,"click"],["appearance","standard"],["matInput","","placeholder","Searched term",3,"keyup"],["input",""],[1,"mat-elevation-z8"],["mat-table","","multiTemplateDataRows","","cdkDropList","",3,"dataSource","cdkDropListDropped"],[3,"matColumnDef",4,"ngFor","ngForOf"],["matColumnDef","expandedDetail"],["mat-cell","",4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","","class","example-element-row","cdkDrag","",3,"example-expanded-row","click",4,"matRowDef","matRowDefColumns"],["mat-row","","class","example-detail-row",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["aria-label","Select page of tickets",3,"pageSizeOptions"],[3,"matColumnDef"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-cell",""],["mat-cell",""],[1,"example-element-detail"],[1,"example-element-description"],["mat-header-row",""],["mat-row","","cdkDrag","",1,"example-element-row",3,"click"],["mat-row","",1,"example-detail-row"],[1,"mat-row"],["colspan","4",1,"mat-cell"]],template:function(e,n){1&e&&(t.TgZ(0,"h2"),t._uU(1,"Tickets"),t.qZA(),t.TgZ(2,"button",0),t.NdJ("click",function(){return n.openDialog()}),t._uU(3,"Create ticket"),t.qZA(),t.TgZ(4,"mat-form-field",1)(5,"mat-label"),t._uU(6,"Filter"),t.qZA(),t.TgZ(7,"input",2,3),t.NdJ("keyup",function(c){return n.applyFilter(c)}),t.qZA()(),t.TgZ(9,"div",4)(10,"table",5),t.NdJ("cdkDropListDropped",function(c){return n.drop(c)}),t.YNc(11,R,3,1,"ng-container",6),t.ynx(12,7),t.YNc(13,F,8,5,"td",8),t.BQk(),t.YNc(14,j,1,0,"tr",9),t.YNc(15,Q,1,2,"tr",10),t.YNc(16,$,1,0,"tr",11),t.YNc(17,z,3,1,"tr",12),t.qZA(),t._UZ(18,"mat-paginator",13),t.qZA()),2&e&&(t.xp6(10),t.Q6J("dataSource",n.ticketsDataSource),t.xp6(1),t.Q6J("ngForOf",n.ticketsColumns),t.xp6(3),t.Q6J("matHeaderRowDef",n.ticketsColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",n.ticketsColumns),t.xp6(1),t.Q6J("matRowDefColumns",t.DdM(7,E)),t.xp6(2),t.Q6J("pageSizeOptions",t.DdM(8,L)))},directives:[v.lW,p.KE,p.hX,T.Nt,l.BZ,u.Wj,f.sg,l.w1,l.fO,l.ge,l.Dz,l.ev,l.as,l.XQ,l.nj,l.Gk,u.Zt,l.Ee,I.NW],styles:["table[_ngcontent-%COMP%]{width:100%}td[_ngcontent-%COMP%], th[_ngcontent-%COMP%]{width:25%}tr.example-detail-row[_ngcontent-%COMP%]{height:0}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):hover{background:whitesmoke}tr.example-element-row[_ngcontent-%COMP%]:not(.example-expanded-row):active{background:#efefef}.example-element-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{border-bottom-width:0}.example-element-detail[_ngcontent-%COMP%]{overflow:hidden;display:flex;flex-direction:column}.example-element-diagram[_ngcontent-%COMP%]{min-width:80px;border:2px solid black;padding:8px;font-weight:lighter;margin:8px 0;height:104px}.example-element-symbol[_ngcontent-%COMP%]{font-weight:700;font-size:40px;line-height:normal}.example-element-description[_ngcontent-%COMP%]{padding:16px}.example-element-description-attribution[_ngcontent-%COMP%]{opacity:.5}.mat-form-field[_ngcontent-%COMP%]{font-size:14px;width:100%}.example-list[_ngcontent-%COMP%]{width:500px;max-width:100%;border:solid 1px #ccc;min-height:60px;display:block;background:white;border-radius:4px;overflow:hidden}.example-box[_ngcontent-%COMP%]{padding:20px 10px;border-bottom:solid 1px #ccc;color:#000000de;display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;background:white;font-size:14px}.example-box.cdk-drag-disabled[_ngcontent-%COMP%]{background:#ccc;cursor:default}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"],data:{animation:[(0,m.X$)("detailExpand",[(0,m.SB)("collapsed",(0,m.oB)({height:"0px",minHeight:"0"})),(0,m.SB)("expanded",(0,m.oB)({height:"*"})),(0,m.eR)("expanded <=> collapsed",(0,m.jt)("225ms cubic-bezier(0.4, 0.0, 0.2, 1)"))])]}}),o})(),pathMatch:"full"},{path:"board",component:(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-board"]],decls:2,vars:0,template:function(e,n){1&e&&(t.TgZ(0,"p"),t._uU(1,"board works!"),t.qZA())},styles:[""]}),o})()}];let V=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[x.Bz.forChild(q)],x.Bz]}),o})(),H=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[w.m,V]]}),o})()}}]);